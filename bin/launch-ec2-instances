#!/usr/bin/env node

'use strict';

const launchEc2Instances = require('../tools/launch-ec-2-instances');

const args = {
	accessKeyId: process.env.AWS_ACCESS_KEY_ID,
	secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,
	region: process.env.AWS_DEFAULT_REGION,
	imageId: process.env.AWS_AMI_ID,
	count: 1,
	iamInstanceProfile: process.env.AWS_IAM_PROFILE,
	monitoring: false,
	instanceType: process.env.AWS_INSTANCE_TYPE,
	keyName: process.env.AWS_KEY_NAME,
	securityGroups: [process.env.AWS_SECURITY_GROUP],
	tags: [{key: 'Name', value: 'website'}],
	ebsOptimized: false
};

console.log('AWS_ACCESS_KEY_ID %s', args.accessKeyId);
console.log('AWS_SECRET_ACCESS_KEY %s', args.secretAccessKey);
console.log('AWS_DEFAULT_REGION %s', args.region);

launchEc2Instances.main(args)
	.then(res => {
		console.log(res);
	})
	.catch(err => {
		console.error('Error launching EC2 instances:');
		console.error(err.stack || err.message || err);
	});
