#!/usr/bin/env node

'use strict';

const filepath = require('filepath');

// CodeDeploy does not copy over hidden files, so
// we need to use 'env' instead of '.env'
require('dotenv').config({
	path: filepath.create(__dirname).dir().append('env').toString()
});

const server = require('../server');

server.main()
	.then(app => {
		const addr = app.API.server.address();
		console.log('*** server started ***');
		console.log('%s:%s', addr.address, addr.port);
	})
	.catch(err => {
		console.error('*** server start error ***');
		console.error(err.stack || err.message || err);
	});
